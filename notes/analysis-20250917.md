# 2025-09-17 C2-Graph 試作結果メモ

## 実行概要
- スクリプト: `scripts/prototype/c2_graph_baseline.py`, `scripts/prototype/c2_batch_report.py`
- データ: `data/sample/meeting-sample-001.json`, `data/sample/meeting-sample-002.json`
- 出力: `runs/20250917-c2-proto/report.md`, `runs/20250917-c2-proto/batch_report.md`

## 主な観察
1. **権限外CANCEL検出**
   - sample-001 の turn10 (Bob→C2), turn13 (Dave→C3) を `unauthorized_cancel` として検出。
   - REVISE後にオーナーがAliceへ移ったC3では、`cancel_before_confirmation` も同時検出。
2. **矛盾率の算出**
   - sample-001: コミットメント3件中2件が矛盾（率0.67）。
   - sample-002: 矛盾なし、正常ストーリー。
   - バッチ集計では 5件中2件が矛盾で矛盾率0.40。
3. **ルール拡張効果**
   - `requires_confirmation` フラグ導入により、REVISE後直ちにCANCELした場合の矛盾が明示化。
   - 将来的には期限超過判定など時間軸ルールを追加予定。
4. **矛盾タイプ別の修正提案**
   - `CONTRADICTION_SUGGESTIONS` を追加し、各矛盾に再発防止アクション（例: オーナー合意を得てからCANCEL）を付記。
   - `meeting-sample-003` を作成し、`cancel_without_assignment`/`duplicate_cancel`/`cancel_before_confirmation`/`unauthorized_cancel` を網羅的に確認。矛盾率は0.62、提案文付きレポートを `runs/20250917-c2-proto-v2/` に出力。

## 次に試すべきこと
- 実データ（AMI/ICSI）のアクションアイテムアノテーションへの適用テスト。
- `cancel_before_confirmation` の正例・負例を増やすサンプル作成。
- 提案文の効果検証（関係者ヒアリングやテンプレ文改善）と、矛盾タイプごとの修正ワークフローを設計。

更新日: 2025-09-17

## 詳細報告（2025-09-17）

### 背景と関連研究
会議理解の研究では、アクションアイテム抽出や要約に焦点を当てた研究が多いが、コミットメントのライフサイクル全体（ASSIGN→CONFIRM→REVISE→CANCEL）を追跡する枠組みは未成熟である。ここでは主要な先行研究と、C2-Graph が補完しようとしているギャップを整理する。

- **Golia & Kalita (2023)**: AMIコーパスを対象に *Action-Item-Driven Summarization* を提案。アクションアイテム抽出→セクション要約→全体統合という三段構成で、長時間会議を扱う際に局所的な行動情報を保持しながら要約精度を向上させた。アクションアイテム検出に強みがあるものの、抽出後にタスクの責任者や状態遷移を追跡する設計はなく、コミットメントのキャンセルや改訂までは扱っていない。
- **Liu et al. (2023)**: *Regularized Context Modeling* により、局所文脈と会議全体の文脈をコントラスト的に学習し、アクションアイテム検出を改善。中国語コーパスを新規に構築し、AMI 英語データにも効果を確認した。複数言語や表現揺れに対する頑健性が示されたが、こちらも `ASSIGN/CONFIRM` の瞬間を捉える点に集中しており、後続の `REVISE/CANCEL` で発生する矛盾までは射程に入っていない。
- **Zhang et al. (2023) / MUG Benchmark**: AliMeeting4MUG コーパスにより、要約・キーフレーズ・アクションアイテムなどを包含した多タスク評価を提示。会議理解を多面的に測定するベンチマークの重要性を示しており、C2-Graph でも Contradiction F1 や QA 指標を併記する設計に影響を受けている。ただし、MUG にはコミットメント遷移ラベルが存在せず、状態変化を検証するのは困難。
- **Wen et al. (2024)**: *Red Teaming Language Models for Contradictory Dialogues* では、チャットボットが自己矛盾を起こす状況をデータセット化し、矛盾箇所の説明生成を評価軸に含めた。矛盾検出と説明の一体化という思想は C2-Graph が提案文を付与する動機付けになっているが、人と人の会議で生じる責任の衝突やロールチェンジは対象外である。

以上のように、先行研究は「アクションアイテムを見つける」「矛盾を検出して説明する」といった部分課題には成果があるものの、コミットメントの状態遷移を継続的に管理し、矛盾検出と運用上の提案を同時に提供するフレームワークは公開されていない。C2-Graph はこの隙間を埋めるべく、状態遷移トラッキング＋矛盾検出＋提案提示をひとつの最小実装にまとめ、研究ベースラインにすることを目指している。

### 研究方針とロードマップ
2025年9月17日時点のキックオフメモでは、Detect→Frame→Design→Run→Analyze→Decide の9フェーズを短期イテレーションで回す計画を立てた。14日間のロードマップでは、はじめの3日で文献調査とギャップ分析を行い、その後データ整備とベースライン構築、試作実行、課題整理へと進む。成功指標として Action-Item F1 / Contradiction F1 / Who-What-When QA を設定し、8週間以内に小規模データで差分を明示することを MVR ゴールと定めている。

### これまでの作業経緯
Detect フェーズでは関連論文を収集し、コミットメント遷移を扱う先行研究が不足していること、矛盾説明を付与する設計が重要であることを整理した。その後、`scripts/prototype/c2_graph_baseline.py` を用いて最小の矛盾検出器を試作し、サンプル会議データで `unauthorized_cancel` などの典型ケースを検出することに成功。バッチ集計スクリプトやコミットメッセージテンプレートを整備し、研究ログが一貫して蓄積できる状態を構築した。

### 今回の実施内容
今回のサイクルでは「矛盾検出結果に即応可能な提案を添付する」ことを目標に、矛盾タイプ別のアクション推薦 (`CONTRADICTION_SUGGESTIONS`) を実装した。併せて `meeting-sample-003` を新規作成し、無割り当てキャンセル・権限外キャンセル・重複キャンセル・確認前キャンセルを網羅するよう設計。レポート生成ロジックでは矛盾行ごとに提案文を付与し、バッチレポートでも同形式で閲覧できるよう整形した。

### 結果と評価
3件のサンプル会議を解析した結果、コミットメント計8件中5件が矛盾に該当し、矛盾率0.62、タイプ内訳（cancel_before_confirmation:2, cancel_without_assignment:1, duplicate_cancel:1, unauthorized_cancel:3）を提案文付きで可視化できた。`meeting-sample-003` では全矛盾パターンを期待通りに検出し、矛盾率1.00で正規化された値を得られた。これにより、矛盾発生時に「誰が何をすべきか」をレポート上で即座に共有できることを確認した。

### 考察
提案文を自動生成することで、検出結果をレビューするだけで次アクションを合意できる可能性が高まった。一方、提案文はテンプレートベースであり、チーム固有の運用や役割分担に合致する保証はない。さらに、現在の矛盾検出ルールは期限超過や遷移の多段チェーンを扱っておらず、実データにおける複雑なケースをカバーしきれていない。提案文が本当に運用改善につながるかは、実会議データでの検証とユーザーフィードバックが不可欠である。

### 今後の予定
次サイクルでは AMI / ICSI のアクションアイテムアノテーションに C2-Graph を適用し、矛盾率や提案文の妥当性を評価する。また、関係者ヒアリングを通じて提案文の表現改善と、矛盾タイプ別の是正ワークフロー設計（例: オーナー合意の再確認、自動リマインド）を進める。加えて、期限超過など時間軸ルールやオーナー交代の再確認手続きを実装し、矛盾検出のカバレッジを拡張する計画である。これらの成果を踏まえ、14日後の判断ポイントで継続／ピボット／撤退を決定する。

### 研究評価サマリ（2025-09-17 時点）
- **ドメイン**: `AGENTS.md` の候補テーマBに沿った「会議におけるコミットメント管理と矛盾検出」。`ASSIGN/CONFIRM/REVISE/CANCEL` を状態遷移として扱う点が明確で、組織内のアクションアイテム運用を対象とする実践的テーマ。
- **新規性**: 先行研究はアクションアイテム抽出や要約に偏り、コミットメントライフサイクル全体を追跡し矛盾に説明＋是正提案を併記する公開基盤は存在しない。C2-Graph は矛盾検出と提案提示を統合した最小プロトタイプとしてギャップを補完できる見通し。
- **実現可能性**: AGENTSの基準（DER≤0.15, TripleF1≥0.85, QA≥0.70, contradiction_f1≥0.70）に対し、現状はサンプルデータで矛盾率や提案生成を確認できた段階。AMI/ICSI サブセットと WhisperX/EEND を前提にしたワークロードは8週間でのMVR達成が現実的で、既存スクリプトとデータ整備計画も整っている。
- **リスク**: (1) 公開データに `REVISE/CANCEL` ラベルが乏しく、追加アノテーションが必要。 (2) 提案文の有効性が実務で検証されていない。 (3) 期限超過や多段遷移など未実装ルールが Contradiction F1 に影響。いずれも今後のTODO（実データ適用・ヒアリング・ルール拡張）に入っており、継続的に管理する。
- **次の意思決定ポイント**: Detect/Frame フェーズで明記した14日後のレビューにて、提案文付き矛盾検出が実データでも機能するか、Contradiction F1 の計測が可能かを基準に継続／Pivot判断を行う。

### テーマ再評価（2025-09-17 再確認）
| 観点 | C2-Graph（現テーマ） | AC-GraphRAG（候補A） | SSI-Graph（候補C） | Overlap-Triple（候補D） |
| --- | --- | --- | --- | --- |
| **研究ギャップ** | コミットメント追跡＋矛盾提案は未整備。会議AI最新動向は目標管理・反省支援（CoExplorer, AreWe On Track, MeetMap）で、責任管理は依然空白。 | アドレス指定を保持するGraphRAGは既存RAG研究の延長線。先行事例多数で差別化が弱い。 | 社会的関係推定はHCIで活発（Observe-Ask-Intervene 等）。重ね合わせだが競合が多い。 | 重複発話×IEは音声処理の既存課題であり、研究事例も多いが改良余地は大きい。 |
| **新規性** | Action item抽出＋矛盾説明＋提案を一体にした公開基盤なし。CommitmentBank等は命題真偽で会議運用までは踏み込んでいない。 | GraphRAG系は2023-2025で急増、加重評価軸が既に研究コミュニティで議論済み。 | 符号付き関係推定はSNA領域で蓄積あり。 | 技術的には明確だが、音声IE＋EENDの統合は先行プラクティスが存在。 |
| **実現可能性** | 現有スクリプトでスプリント可能。必要データはAMI/ICSI＋自作サンプル。 | アドレスラベル付きデータが希少→大規模注釈が必要。 | 感情・賛否ラベルなど追加アノテーションが重い。 | WhisperX＋EEND実装でGPUコスト大。 |
| **インパクト** | 企業SaaSの「自動フォローアップ」「責任可視化」需要増（AI meeting assistants市場2024→2025で24.9%成長）。会議ツールに組込みやすい。 | QA精度向上は価値があるがレガシー製品との差別化が難しい。 | 組織心理学・ハラスメント検知など派生可能だが倫理・プライバシーリスクが大きい。 | 音声品質改善で横展開できるが、ユーザ価値がわかりやすく伝わりにくい。 |
| **リスク** | ラベル不足、提案効果の検証コスト、矛盾ルールの拡張。 | データ入手がボトルネック。 | ラベル設計・評価が複雑。 | 技術的難度は高いがリターンが限定的。 |

**結論**: 最新の会議AI研究は目標の明確化・インクルージョン・対話構造可視化にシフトしているが、コミットメント責任の追跡と是正支援には依然ギャップが残る。産業面でもSalesforce/HubSpot等がアクションアイテム追跡を強化しており、矛盾や責任逸脱を定量化し改善提案まで行う基盤は差別化要素として依然有望である。ラベル拡充と実データ検証の負債は大きいが、候補テーマと比べて中期的ROIが高く、AGENTSのExitルール（2週間でContradiction F1など評価が整わなければPivot）に従い継続検証を進める価値がある。
