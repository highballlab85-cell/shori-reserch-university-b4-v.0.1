# 2025-09-17 C2-Graph 試作結果メモ

## 実行概要
- スクリプト: `scripts/prototype/c2_graph_baseline.py`, `scripts/prototype/c2_batch_report.py`
- データ: `data/sample/meeting-sample-001.json`, `data/sample/meeting-sample-002.json`
- 出力: `runs/20250917-c2-proto/report.md`, `runs/20250917-c2-proto/batch_report.md`

## 主な観察
1. **権限外CANCEL検出**
   - sample-001 の turn10 (Bob→C2), turn13 (Dave→C3) を `unauthorized_cancel` として検出。
   - REVISE後にオーナーがAliceへ移ったC3では、`cancel_before_confirmation` も同時検出。
2. **矛盾率の算出**
   - sample-001: コミットメント3件中2件が矛盾（率0.67）。
   - sample-002: 矛盾なし、正常ストーリー。
   - バッチ集計では 5件中2件が矛盾で矛盾率0.40。
3. **ルール拡張効果**
   - `requires_confirmation` フラグ導入により、REVISE後直ちにCANCELした場合の矛盾が明示化。
   - 将来的には期限超過判定など時間軸ルールを追加予定。
4. **矛盾タイプ別の修正提案**
   - `CONTRADICTION_SUGGESTIONS` を追加し、各矛盾に再発防止アクション（例: オーナー合意を得てからCANCEL）を付記。
   - `meeting-sample-003` を作成し、`cancel_without_assignment`/`duplicate_cancel`/`cancel_before_confirmation`/`unauthorized_cancel` を網羅的に確認。矛盾率は0.62、提案文付きレポートを `runs/20250917-c2-proto-v2/` に出力。

## 次に試すべきこと
- 実データ（AMI/ICSI）のアクションアイテムアノテーションへの適用テスト。
- `cancel_before_confirmation` の正例・負例を増やすサンプル作成。
- 提案文の効果検証（関係者ヒアリングやテンプレ文改善）と、矛盾タイプごとの修正ワークフローを設計。

更新日: 2025-09-17
